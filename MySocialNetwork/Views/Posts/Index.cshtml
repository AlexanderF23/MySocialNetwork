@model List<MySocialNetwork.Models.Post>

<h2>Feed</h2>

<!-- formular til nyt opslag -->
<form method="post" asp-action="Create">
    <textarea name="content" class="form-control" placeholder="Skriv noget" rows="3"></textarea>
    <button class="btn btn-primary mt-2">Post</button>
</form>

<hr/>

<!-- viser alle opslag -->
@foreach (var post in Model)
{
    <div class="card mb-3">
        <div class="card-body">
            <strong>@post.Username:</strong>
            <small class="text-muted">@post.CreatedAt.ToString("g")</small>
            <p>@post.Content</p>
            
            @if (Context.Session.GetString("User") == post.Username)
            {
                <a href="/Posts/Edit/@post.Id" class="btn btn-sm btn-secondary">Rediger</a>
                
                <form method="post" asp-action="Delete" asp-route-id="@post.Id" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger">Slet</button>
                </form>
            }
            
            @if (TempData["Message"] != null)
            {
                <div class="alert alert-success">
                    @TempData["Message"]
                </div>
            }
        </div>
    </div>
}